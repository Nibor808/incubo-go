server {
  listen 3000;

  add_header        MyHeaderClient                      "testclient8";

  set $POSTHeaderVal "";
  set $OPTIONSHeaderVal "";
  set $GETHeaderVal "";

  if ($request_method = "OPTIONS") {
    set $OPTIONSHeaderVal "BOOHOO-OPTIONS";
    #proxy_set_header "Access-Control-Allow-Methods" "GET, POST, OPTIONS";
    #
    # Custom headers and headers various browsers *should* be OK with but aren"t
    #
    #proxy_set_header "Access-Control-Allow-Headers" "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range";
    #
    # Tell client that this pre-flight info is valid for 20 days
    #
    # proxy_set_header "Access-Control-Max-Age" 1728000;
    # proxy_set_header "Content-Type" "text/plain; charset=utf-8";
    # proxy_set_header "Content-Length" 0;
    return 204;
  }
  if ($request_method = "POST") {
    set $POSTHeaderVal "BOOHOO-POST";
    # proxy_set_header "Access-Control-Allow-Origin" "*";
    # proxy_set_header "Access-Control-Allow-Methods" "GET, POST, OPTIONS";
    # proxy_set_header "Access-Control-Allow-Headers" "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range";
    # proxy_set_header "Access-Control-Expose-Headers" "Content-Length,Content-Range";
  }

  if ($request_method = "GET") {
    set $GETHeaderVal "BOOHOO-GET";
    # proxy_set_header "Access-Control-Allow-Origin" "*";
    # proxy_set_header "Access-Control-Allow-Methods" "GET, POST, OPTIONS";
    # proxy_set_header "Access-Control-Allow-Headers" "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range";
    # proxy_set_header "Access-Control-Expose-Headers" "Content-Length,Content-Range";
  }

  add_header "CLIENT-HEADER-POST"    $POSTHeaderVal;
  add_header "CLIENT-HEADER-GET"    $GETHeaderVal;
  add_header "CLIENT-HEADER-OPTIONS" $OPTIONSHeaderVal;

  # location @app {
  #   add_header    MyHeaderApp                   "testapp12";
  #   add_header    Access-Control-Allow-Origin   "*";
  #   add_header    Access-Control-Allow-Methods  "GET, POST, OPTIONS";

  #   proxy_method GET;
  #   root /usr/share/nginx/html;
  #   index index.html index.htm;
  #   try_files $uri $uri/ /index.html;
  # }

  location / {
    root /usr/share/nginx/html;
    index index.html index.htm;
    try_files $uri $uri/ /index.html;
    # error_page 405 =200 @app$request_uri;
  }
}
